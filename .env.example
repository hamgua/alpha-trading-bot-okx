# =============================================================================
# OKX交易所API配置
# =============================================================================
# API密钥 - 从OKX官网获取，用于身份验证
OKX_API_KEY=your_okx_api_key_here
# API密钥的私钥 - 用于签名验证，请妥善保管
OKX_SECRET=your_okx_secret_here
# API密码 - 创建API时设置的密码
OKX_PASSWORD=your_okx_password_here
# 是否使用沙盒环境 - true:测试环境 false:真实交易环境
OKX_SANDBOX=false
# 网络超时配置
NETWORK_TIMEOUT=60

# =============================================================================
# 交易配置
# =============================================================================
# 测试模式 - true:模拟交易不真金白银 false:真实交易
TEST_MODE=false
# 最大持仓量 - 单次交易的最大仓位（BTC为单位）
MAX_POSITION_SIZE=0.01
# 杠杆倍数 - 谨慎设置，过高风险极大
LEVERAGE=10
# 交易周期 - 多少分钟执行一次交易循环
CYCLE_MINUTES=15
# 是否启用随机时间偏移 - true:启用 false:禁用（用于规避风控检测）
RANDOM_OFFSET_ENABLED=true
# 随机偏移范围 - 秒为单位，默认±180秒（±3分钟）
RANDOM_OFFSET_RANGE=180
# 是否允许做空 - true:允许做空 false:只允许做多
ALLOW_SHORT_SELLING=false

# =============================================================================
# 风险控制配置 ⚠️ 重要：请根据自己的风险承受能力设置
# =============================================================================
# 最大日亏损 - 当日亏损达到此金额时停止交易（USDT）
MAX_DAILY_LOSS=100
# 最大仓位风险 - 单笔交易最大亏损比例（0.05=5%）
MAX_POSITION_RISK=0.05

# =============================================================================
# 🤖 AI智能分析配置
# =============================================================================
# AI决策模式选择
# single: 单一AI模型决策（简单模式）
# fusion: 多AI模型融合决策（推荐模式）
AI_MODE=single
# 默认AI提供商 - 当AI_MODE=single时使用
# 可选：kimi/deepseek/qwen/openai
AI_DEFAULT_PROVIDER=deepseek
# AI最低置信度 - AI信号置信度低于此值时不开仓（0.3=30%）
AI_MIN_CONFIDENCE=0.3
# AI请求超时时间 - 秒，建议30-60秒
AI_TIMEOUT=30
# AI缓存时间 - 秒，相同请求缓存时间避免重复调用
AI_CACHE_DURATION=900
# AI最大重试次数 - 失败后重试次数
AI_MAX_RETRIES=2
# 是否启用AI降级 - 主AI失败时自动切换到备用AI
AI_FALLBACK_ENABLED=true

# =============================================================================
# 🔗 AI模型融合配置（当AI_MODE=fusion时生效）
# =============================================================================
# AI融合提供商列表 - 使用逗号分隔的多个AI提供商
AI_FUSION_PROVIDERS=deepseek,kimi
# AI融合权重分配 - 格式：provider1:weight1,provider2:weight2
# 权重总和应为1.0，不设置则默认等权重
AI_FUSION_WEIGHTS=deepseek:0.7,kimi:0.3
# AI融合策略
# consensus: 共识策略（所有模型一致才行动，最保守）
# weighted: 加权平均策略（推荐，平衡性能与风险）
# majority: 多数表决策略（少数服从多数）
# confidence: 置信度优先策略（选择置信度最高的）
AI_FUSION_STRATEGY=weighted
# AI融合阈值
# consensus策略：需要多少比例的模型达成一致（0.6=60%）
# majority策略：需要多少比例的模型支持（0.5=50%+1）
AI_FUSION_THRESHOLD=0.6

# =============================================================================
# 🔑 AI服务API密钥配置
# =============================================================================
# DeepSeek AI API密钥 - 从DeepSeek官网获取
DEEPSEEK_API_KEY=your_deepseek_api_key_here
# Kimi AI API密钥 - 从Moonshot AI官网获取
KIMI_API_KEY=your_kimi_api_key_here
# 通义千问API密钥 - 从阿里云获取
QWEN_API_KEY=your_qwen_api_key_here
# OpenAI API密钥 - 从OpenAI官网获取
OPENAI_API_KEY=your_openai_api_key_here

# =============================================================================
# 系统配置
# =============================================================================
# 日志级别 - DEBUG/INFO/WARNING/ERROR，生产环境建议INFO
LOG_LEVEL=INFO
# 是否启用Web界面 - true:启用Streamlit界面 false:纯命令行
WEB_ENABLED=false
# Web服务端口 - Streamlit界面访问端口
WEB_PORT=8501

# =============================================================================
# 高级交易配置
# =============================================================================
# 是否启用限价单 - true:使用限价单 false:使用市价单
LIMIT_ORDER_ENABLED=true

# =============================================================================
# 🎯 投资策略选择配置
# 说明：根据投资者风险偏好选择对应的策略类型
# 可选值：conservative（稳健型）、moderate（中等型）、aggressive（激进型）
# =============================================================================
# 投资策略类型选择
# conservative: 稳健型（宽区间30%-70%，低频次，提前锁定利润）
# moderate: 中等型（中等区间25%-75%，趋势跟踪，平衡策略）
# aggressive: 激进型（窄区间15%-85%，高频次，追求极致买卖点）
INVESTMENT_TYPE=conservative

# =============================================================================
# 📊 止盈止损配置（根据投资类型自动调整）
# =============================================================================
# 预设的止盈止损配置（一键切换，无需手动设置具体百分比）
# conservative（稳健型）：止盈6%，止损2% - 适合风险厌恶者，稳健收益
# moderate（中等型）：止盈8%，止损3% - 适合平衡型投资者，风险收益均衡
# aggressive（激进型）：止盈12%，止损5% - 适合风险偏好者，追求高收益
#
# 只需设置投资类型，系统会自动调取对应的止盈止损配置
# 无需手动设置 TAKE_PROFIT_PERCENT 和 STOP_LOSS_PERCENT
# =============================================================================

# 止盈止损总开关 - true:启用止盈止损 false:禁用止盈止损
TAKE_PROFIT_ENABLED=true
STOP_LOSS_ENABLED=true

# 止盈止损模式选择 - normal:普通模式 smart:智能模式
TAKE_PROFIT_MODE=smart
STOP_LOSS_MODE=smart

# 智能模式通用配置
SMART_TP_SL_ENABLED=true            # 是否启用智能止盈止损
ENABLE_PROFIT_LOCK=true             # 是否启用利润锁定功能
PROFIT_LOCK_THRESHOLD=0.05         # 利润锁定阈值（5%时锁定部分利润）

# 自适应止损配置（新增）
ADAPTIVE_STOP_LOSS_ENABLED=true     # 是否启用自适应止损
UP_TREND_STOP_LOSS=0.02             # 上升趋势止损百分比（2%）
DOWN_TREND_STOP_LOSS=0.04           # 下降趋势止损百分比（4%）

# 普通模式配置（固定值，设置后不变）
# 普通模式下，不同投资类型的止盈止损百分比
CONSERVATIVE_NORMAL_TP_PERCENT=6        # 保守型普通模式止盈百分比
CONSERVATIVE_NORMAL_SL_PERCENT=2        # 保守型普通模式止损百分比
MODERATE_NORMAL_TP_PERCENT=8            # 中等型普通模式止盈百分比
MODERATE_NORMAL_SL_PERCENT=3            # 中等型普通模式止损百分比
AGGRESSIVE_NORMAL_TP_PERCENT=12         # 激进型普通模式止盈百分比
AGGRESSIVE_NORMAL_SL_PERCENT=5          # 激进型普通模式止损百分比

# 智能模式配置（动态调整）
# 智能模式-固定模式配置（单个止盈订单，动态调整）
CONSERVATIVE_SMART_FIXED_TP_PERCENT=6   # 保守型智能固定模式止盈百分比
CONSERVATIVE_SMART_FIXED_SL_PERCENT=2   # 保守型智能固定模式止损百分比
MODERATE_SMART_FIXED_TP_PERCENT=8       # 中等型智能固定模式止盈百分比
MODERATE_SMART_FIXED_SL_PERCENT=3       # 中等型智能固定模式止损百分比
AGGRESSIVE_SMART_FIXED_TP_PERCENT=12    # 激进型智能固定模式止盈百分比
AGGRESSIVE_SMART_FIXED_SL_PERCENT=5     # 激进型智能固定模式止损百分比

# 智能模式-多级模式配置（多个止盈订单，动态调整）
CONSERVATIVE_SMART_MULTI_TP_LEVELS=2,5,8        # 保守型智能多级模式止盈级别
CONSERVATIVE_SMART_MULTI_TP_RATIOS=0.6,0.3,0.1  # 保守型智能多级模式平仓比例
MODERATE_SMART_MULTI_TP_LEVELS=3,6,10           # 中等型智能多级模式止盈级别
MODERATE_SMART_MULTI_TP_RATIOS=0.4,0.3,0.3      # 中等型智能多级模式平仓比例
AGGRESSIVE_SMART_MULTI_TP_LEVELS=5,10,15        # 激进型智能多级模式止盈级别
AGGRESSIVE_SMART_MULTI_TP_RATIOS=0.2,0.3,0.5    # 激进型智能多级模式平仓比例


# =============================================================================
# 网络代理配置（可选）
# =============================================================================
# 是否启用网络代理 - true:启用 false:禁用
PROXY_ENABLED=false
# HTTP代理 - 如：http://127.0.0.1:7890
HTTP_PROXY=
# HTTPS代理 - 如：http://127.0.0.1:7890
HTTPS_PROXY=

# =============================================================================
# 📝 使用说明：
# 1. 将此文件复制为 .env 并填入真实配置
# 2. 首次使用建议 TEST_MODE=true 进行模拟交易
# 3. 妥善保管API密钥，不要上传到GitHub
# 4. 根据风险承受能力调整风险控制参数
# 5. AI功能需要相应的API密钥才能使用
# =============================================================================

# =============================================================================
# 🔄 AI配置迁移说明（2025-12-12更新）
# =============================================================================
# 本次更新简化了AI配置，主要变化：
# 1. 新增 AI_MODE 参数：
#    - single: 单一AI模型决策（原 USE_MULTI_AI=false）
#    - fusion: 多AI模型融合决策（原 USE_MULTI_AI_FUSION=true）
# 2. 废弃参数（已自动迁移）：
#    - USE_MULTI_AI → 由 AI_MODE 控制
#    - USE_MULTI_AI_FUSION → 由 AI_MODE 控制
#    - AI_PROVIDER → 改为 AI_DEFAULT_PROVIDER
# 3. 配置更简洁清晰，分为三个部分：
#    - AI基础配置（必须）
#    - AI融合配置（AI_MODE=fusion时生效）
#    - API密钥配置（必须）
# =============================================================================