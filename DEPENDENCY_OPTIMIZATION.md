# 依赖优化总结

## 🎯 优化目标
- 移除未使用的依赖包
- 减少安装时间和镜像大小
- 提高安全性（减少潜在漏洞）
- 保持依赖的清晰和可维护性

## 📋 优化内容

### 已移除的依赖包
1. **pandas** - 当前项目未使用数据处理功能
2. **httpx** - 未在代码中使用
3. **aiodns** - 未在代码中使用
4. **asyncio** - Python 3.7+ 内置模块，无需安装

### 可选依赖处理
以下依赖已注释，可按需启用：
- **openai** - 当前通过HTTP API调用，未使用官方SDK
- **streamlit** - Web界面框架
- **plotly** - 图表可视化库

### 版本升级
- **numpy**: 从 >=1.24.0 升级到 >=1.25.0，获得更好性能

## 🔧 使用说明

### 基础安装（最小依赖）
```bash
pip install -r requirements.txt
```

### 完整安装（包含所有可选功能）
```bash
# 解除注释相关依赖后安装
pip install -r requirements.txt

# 或使用 pyproject.toml
pip install -e ".[ai,web,dev]"
```

### 按需启用功能
1. **需要Web界面**: 取消注释 `streamlit` 和 `plotly`
2. **需要OpenAI SDK**: 取消注释 `openai`
3. **需要数据处理**: 添加 `pandas`

## 📊 优化效果

### 安装包数量减少
- 核心依赖：从 7 个减少到 4 个（-43%）
- 总体依赖：从 14 个减少到 8 个（-43%）

### 安装大小估算
- 优化前：约 150MB+
- 优化后：约 80MB+
- 减少约 47% 的安装大小

## 🚀 最佳实践建议

1. **定期审查依赖**：建议每季度检查一次依赖使用情况
2. **版本锁定**：生产环境建议使用锁定文件
3. **安全扫描**：使用 `pip-audit` 定期扫描漏洞
4. **依赖分组**：保持核心、可选、开发依赖的清晰分组

## 🔍 验证方法

安装后验证所有功能是否正常：
```bash
# 运行测试
pytest tests/

# 检查导入
python -c "import alpha_trading_bot; print('✅ 导入成功')"

# 检查核心功能
python -c "from alpha_trading_bot import create_bot; print('✅ 核心功能正常')"
```

## 📅 后续计划

- [ ] 监控新版本依赖的发布
- [ ] 定期评估是否需要添加新的依赖
- [ ] 考虑迁移到 poetry 进行更精细的依赖管理